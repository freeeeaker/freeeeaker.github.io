!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.textOverflow=r():e.textOverflow=r()}(window,function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r,n){"use strict";function t(e){var r=document.createDocumentFragment(),n=!0,t=!1,o=void 0;try{for(var i,l=e.nodeValue[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var d=i.value,a=document.createElement("x-node");a.innerHTML=d,r.appendChild(a)}}catch(e){t=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(t)throw o}}e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)}function o(e){for(var r=e.parentNode;e.childNodes.length>0;)r.insertBefore(e.childNodes[0],e);e.parentNode.removeChild(e)}function i(e){var r=getComputedStyle(e).marginLeft,n=getComputedStyle(e).marginRight;return"auto"===r&&(r=0),"auto"===n&&(n=0),parseFloat(r)+parseFloat(n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var n=r.str,l=r.addedStr,d=r.maxWidth,a=r.maxLine,f=void 0===a?1:a,c=r.emptyLine,u=void 0===c||c;if(e&&1===e.nodeType){e.innerHTML="",n=n.replace(/^(\r?\n)+|(\r?\n)$/g,""),n=u?n.replace(/(\r?\n){2,}/g,"<br><br>").replace(/\r?\n/g,"<br>"):n.replace(/(\r?\n)+/g,"<br>");var p=document.createElement("div");p.innerHTML=n;for(var s=function e(r){for(var n=[],t=0;t<r.childNodes.length;t++){var o=r.childNodes[t];o.childNodes.length>0?n=n.concat(e(o)):n.push(o)}return n}(p),h=0;h<s.length;h++)3===s[h].nodeType&&t(s[h]);for(var m=p.innerHTML,v=[],b=0,g=0,x=!1,y=document.createElement("p"),N=document.createElement("span"),C=null,E=0;m.length>0;){var S=m.indexOf("<br>");if(-1===S){v.push(m);break}if(0!==S?(n=m.substring(0,S),v.push(n)):v.push("<br>"),"<br>"===m.slice(S)){v.push("<br>");break}m=m.slice(S+4)}for(N.innerHTML=l,y.appendChild(N),e.appendChild(y),b=N.offsetWidth+i(N),e.removeChild(y),h=0;h<v.length;h++){var L=v[h];if("<br>"===L)g++,e.appendChild(document.createElement("br"));else{(q=document.createElement("p")).innerHTML=L,e.appendChild(q),q.childNodes;var M=0,T=document.createElement("p");e.appendChild(T),g++;var H=P(q);if(e.removeChild(q),H)break;if(g===f){if(v[h+1]){x=!0;break}}else if(g===f-1&&"<br>"===v[h+1]&&v[h+2]){x=!0;break}}}if(x){if(E>=d)for(;C;)if("x-node"===C.nodeName.toLowerCase()){if(E-=C.offsetWidth,(C=C.previousElementSibling||C.parentNode.previousElementSibling).parentNode.removeChild(C.nextElementSibling),E<d)break}else{for(var w=[].slice.call(C.querySelectorAll("x-node")),O=w.length;O;){var j=w[O-1];if(E-=j.offsetWidth,j.parentNode.removeChild(j),O--,E<d)break}C=C.previousElementSibling,0===O&&C.parentNode.removeChild(C.nextElementSibling)}var k=(q=e.querySelectorAll("p"))[q.length-1];k.innerHTML=k.innerHTML+l}var W=e.querySelectorAll("x-node"),_=e.querySelectorAll("p");for(h=0;h<_.length;h++){var q=_[h],A=document.createElement("br");q.nextElementSibling&&q.parentNode.insertBefore(A,q.nextElementSibling),o(q)}for(h=0;h<W.length;h++)o(W[h]);e.normalize()}function P(e,r){for(var n=e.childNodes,t=0;t<n.length;t++){var o=n[t];if("x-node"===o.nodeName.toLowerCase()||0===o.childNodes.length){if(C=o.cloneNode(!0),r?r.appendChild(C):T.appendChild(C),M+=o.offsetWidth+i(o),E=M+b,M>=d&&(g++,M=o.offsetWidth,g>f))return x=!0,!0}else if(M+=i(o),(C=o.cloneNode(!0)).innerHTML="",T.appendChild(C),P(o,C))return!0}return!1}}}])});
